# The export directive indicates which paths are to be exported.
all.export /uclhc
oss.localroot /data

if named rdr
  all.role manager
  xrd.port <%= scope['xrootd::xrd_port'] %>
else if named srv
  all.role server
  xrd.port 1093

  # enable voms security for data server
  xrootd.seclib /usr/lib64/libXrdSec.so
  sec.protparm gsi -vomsfun:/usr/lib64/libXrdSecgsiVOMS.so -vomsfunparms:certfmt=raw|vos=<%= scope['xrootd::vo'] %>|dbg -vomsat:2l
  sec.protocol /usr/lib64 gsi -ca:1 -crl:3
fi

# The cmsd running on a data server node needs to know where the redirector
# (i.e. manager) is running.
all.manager <%= @fqdn %> 3121
all.manager meta uclhc-fe-1.t2.ucsd.edu <%= scope['xrootd::meta_cmsd_port'] %>

# The copycmd directive tells the frm_xfrd what to use to copy files into
# an exported path with the 'stage' attribute. Here we just say this will
# be '/bin/cp' to allow the frm_xfrd to actual start to show that it works.
# Here missing files are created in /tmp as zero-length files.
#
frm.xfr.copycmd /bin/cp /dev/null $PFN

# The adminpath and pidpath variables indicate where the pid and various
# IPC files should be placed
#
all.adminpath /var/spool/xrootd
all.pidpath /var/run/xrootd
